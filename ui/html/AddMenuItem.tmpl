{{define "content"}}

<div class="row">
    <!-- Sidebar for Categories -->
    <div class="col s12 m4 l3">
      <h5>Categories</h5>
  
      <!-- Add Category Form -->
      <form action="/category/add" method="POST">
        <div class="input-field">
          <input type="text" id="name" name="name" required>
          <label for="name">New Category</label>
        </div>
        <button type="submit" class="btn green">Add</button>
      </form>
  
      <ul class="collection with-header" style="margin-top: 2rem;">
        <li class="collection-header"><h6>Existing</h6></li>
        {{ range .Categories }}
        <li class="collection-item">
          {{ .Name }}
          <form action="/category/delete" method="POST" style="display:inline;">
            <button type="submit" class="btn-flat red-text right" onclick="return confirm('Delete this category?');">
              <i class="material-icons">delete</i>
            </button>
          </form>
        </li>
        {{ end }}
      </ul>
    </div>
  
    <!-- Main Menu Content -->
    <div class="col s12 m8 l9">
        <div class="container" style="margin-top: 3rem;">
            <h4>Add Menu Item</h4>
            <form action="/menu/add/new" method="POST" class="col s12">
          
              <!-- Name -->
              <div class="input-field">
                <input id="name" name="name" type="text" value="{{index .FormData "name"}}">
                <label for="name">Item Name</label>
              </div>
              {{ with .FormErrors.name }}
                <div class="error">{{ . }}</div>
              {{ end }}
          
              <!-- Description -->
              <div class="input-field">
                <textarea id="description" name="description" class="materialize-textarea">{{index .FormData "description"}}</textarea>
                <label for="description">Description</label>
              </div>
              {{ with .FormErrors.description }}
                <div class="error">{{ . }}</div>
              {{ end }}
          
              <!-- Price -->
              <div class="input-field">
                <input id="price" name="price" type="number" step="0.01" value="{{index .FormData "price"}}">
                <label for="price">Price (BZD)</label>
              </div>
              {{ with .FormErrors.price }}
                <div class="error">{{ . }}</div>
              {{ end }}
          
              <!-- Category Select Dropdown -->
            <div class="input-field">
                <select name="category_id">
                <option value="" disabled selected>Choose a category</option>
                {{ range .Categories }}
                <option value="{{ .ID }}" {{ if eq (index $.FormData "category_id") (printf "%d" .ID) }}selected{{ end }}>
                    {{ .Name }}
                </option>
                {{ end }}
                </select>
                <label>Category</label>
            </div>
          
              <!-- Image URL -->
              <div class="input-field">
                <input id="image_url" name="image_url" type="text" value="{{index .FormData "image_url"}}">
                <label for="image_url">Image URL</label>
              </div>
              {{ with .FormErrors.image_url }}
                <div class="error">{{ . }}</div>
              {{ end }}
          
              <!-- Submit -->
              <button class="btn waves-effect waves-light burgundy darken-3" type="submit">
                Add Item
              </button>
            </form>
          </div>
    </div>
  </div>
{{ end }}